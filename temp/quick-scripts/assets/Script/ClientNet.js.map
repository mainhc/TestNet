{"version":3,"sources":["ClientNet.js"],"names":["ClientNet","cc","Class","properties","m_strServerIp","m_strIpPort","m_pWebSocket","initNet","svrIp","strPort","strWs","WebSocket","pSelf","onopen","evt","log","send","onclose","onmessage","onerror","e","name","message","CloseNet","close","module","exports"],"mappings":";;;;;;AAAA,IAAIA,YAAYC,GAAGC,KAAH,CAAS;;AAIrBC,gBAAY;AACTC,uBAAc,EADL;AAETC,qBAAY,EAFH;AAGTC,sBAAa;AAHJ,KAJS;;AAUrBC,aAAQ,iBAASC,KAAT,EAAeC,OAAf,EACR;AACI,YAAGD,SAAO,EAAP,IAAaA,SAAO,IAAvB,EACA;AACI,mBAAO,KAAP;AACH;AACD,YAAGC,WAAS,EAAT,IAAeA,WAAS,IAA3B,EACA;AACI,mBAAO,KAAP;AACH;AACD,aAAKL,aAAL,GAAqBI,KAArB;AACA,aAAKH,WAAL,GAAmBI,OAAnB;AACA,YAAIC,QAAQ,UAAU,KAAKN,aAAf,GAA+B,GAA/B,GAAqC,KAAKC,WAAtD;AACA,YACA;AACI,iBAAKC,YAAL,GAAoB,IAAIK,SAAJ,CAAcD,KAAd,CAApB;AACA,gBAAIE,QAAQ,IAAZ;AACA,iBAAKN,YAAL,CAAkBO,MAAlB,GAA2B,UAASC,GAAT,EAC3B;AACIb,mBAAGc,GAAH,CAAO,wBAAP;AACAH,sBAAMN,YAAN,CAAmBU,IAAnB,CAAwB,gBAAxB;AACAJ,sBAAMN,YAAN,CAAmBU,IAAnB,CAAwB,gBAAxB;AACAJ,sBAAMN,YAAN,CAAmBU,IAAnB,CAAwB,gBAAxB;AACAJ,sBAAMN,YAAN,CAAmBU,IAAnB,CAAwB,gBAAxB;AACAJ,sBAAMN,YAAN,CAAmBU,IAAnB,CAAwB,gBAAxB;AAEH,aATD;;AAWA,iBAAKV,YAAL,CAAkBW,OAAlB,GAA4B,UAASH,GAAT,EAC5B;AACKb,mBAAGc,GAAH,CAAO,yBAAP;AACJ,aAHD;;AAKA,iBAAKT,YAAL,CAAkBY,SAAlB,GAA8B,UAASJ,GAAT,EAC9B;AACIb,mBAAGc,GAAH,CAAO,2BAAP;AACH,aAHD;;AAKA,iBAAKT,YAAL,CAAkBa,OAAlB,GAA4B,UAASL,GAAT,EAC5B;AACGb,mBAAGc,GAAH,CAAO,yBAAP;AACF,aAHD;AAKH,SA9BD,CA+BA,OAAMK,CAAN,EACA;AACInB,eAAGc,GAAH,CAAOK,EAAEC,IAAF,GAAS,YAAT,GAAwBD,EAAEE,OAAjC;AACH;;AAGD;AAEH,KA9DoB;;AAgErBC,cAAS,oBACT;AACI,YAAG,KAAKjB,YAAL,IAAqB,IAAxB,EACA;AACI,iBAAKA,YAAL,CAAkBkB,KAAlB;AACH;AACJ;;AAID;AACA;;AAEA;AA7EqB,CAAT,CAAhB;;AAgFAC,OAAOC,OAAP,GAAiB,EAAC1B,oBAAD,EAAjB","file":"ClientNet.js","sourceRoot":"..\\..\\..\\..\\assets\\Script","sourcesContent":["var ClientNet = cc.Class({\r\n\r\n    \r\n\r\n    properties: {\r\n       m_strServerIp:\"\",\r\n       m_strIpPort:\"\",\r\n       m_pWebSocket:null,\r\n    },\r\n\r\n    initNet:function(svrIp,strPort)\r\n    {\r\n        if(svrIp==\"\" || svrIp==null)\r\n        {\r\n            return false;\r\n        }\r\n        if(strPort==\"\" || strPort==null)\r\n        {\r\n            return false;\r\n        }\r\n        this.m_strServerIp = svrIp;\r\n        this.m_strIpPort = strPort;  \r\n        var strWs = \"ws://\" + this.m_strServerIp + \":\" + this.m_strIpPort;\r\n        try\r\n        {\r\n            this.m_pWebSocket = new WebSocket(strWs);\r\n            var pSelf = this;\r\n            this.m_pWebSocket.onopen = function(evt)\r\n            {\r\n                cc.log(\"m_pWebSocket    onopen\");\r\n                pSelf.m_pWebSocket.send(\"my clinet go01\");\r\n                pSelf.m_pWebSocket.send(\"my clinet go02\");\r\n                pSelf.m_pWebSocket.send(\"my clinet go03\");\r\n                pSelf.m_pWebSocket.send(\"my clinet go04\");\r\n                pSelf.m_pWebSocket.send(\"my clinet go05\");\r\n               \r\n            };\r\n                \r\n            this.m_pWebSocket.onclose = function(evt)\r\n            {\r\n                 cc.log(\"m_pWebSocket    onclose\");\r\n            };\r\n            \r\n            this.m_pWebSocket.onmessage = function(evt)\r\n            {\r\n                cc.log(\"m_pWebSocket    onmessage\");\r\n            };\r\n            \r\n            this.m_pWebSocket.onerror = function(evt)\r\n            {\r\n               cc.log(\"m_pWebSocket    onerror\");\r\n            };        \r\n\r\n        }\r\n        catch(e)\r\n        {            \r\n            cc.log(e.name + \" NetError:\" + e.message);\r\n        };\r\n        \r\n\r\n        //this.m_pWebSocket.\r\n\r\n    },\r\n\r\n    CloseNet:function()\r\n    {\r\n        if(this.m_pWebSocket != null)\r\n        {\r\n            this.m_pWebSocket.close();\r\n        }\r\n    }\r\n\r\n   \r\n\r\n    // called every frame, uncomment this function to activate update callback\r\n    // update: function (dt) {\r\n\r\n    // },\r\n});\r\n\r\nmodule.exports = {ClientNet};\r\n"]}