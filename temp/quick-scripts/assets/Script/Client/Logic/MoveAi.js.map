{"version":3,"sources":["MoveAi.js"],"names":["eObjState","require","ONEGRIDPIX","MoveAi","cc","Class","properties","m_pObj","initMoveAi","pObj","updateMoveAi","dt","m_objState","eObjWalk","fDis","m_iSpeed","toFixed","fdirhudu","m_fDir","log","tempVec","pForAngle","m_Pos","x","y","module","exports"],"mappings":";;;;;;AAAA;AACA,IAAIA,YAAYC,QAAQ,WAAR,EAAqBD,SAArC;AACA,IAAME,aAAa,EAAnB;;AAEA,IAAIC,SAASC,GAAGC,KAAH,CAAS;;AAElBC,gBAAW;;AAEPC,gBAAO;;AAFA,KAFO;;AAQlBC,cARkB,sBAQPC,IARO,EASlB;AACI,aAAKF,MAAL,GAAcE,IAAd;AACH,KAXiB;AAalBC,gBAbkB,wBAaLC,EAbK,EAclB;AACI,YAAG,KAAKJ,MAAL,CAAYK,UAAZ,IAA0BZ,UAAUa,QAAvC,EACA;AACI,gBAAIC,OAAOZ,aAAa,KAAKK,MAAL,CAAYQ,QAAzB,GAAoCJ,EAA/C;AACAG,mBAAOA,KAAKE,OAAL,CAAa,CAAb,CAAP;AACA;AACA,gBAAIC,WAAW,KAAKV,MAAL,CAAYW,MAA3B;;AAEAd,eAAGe,GAAH,CAAO,0BAA0BF,QAAjC;AACA,gBAAIG,UAAUhB,GAAGiB,SAAH,CAAaJ,QAAb,CAAd;AACA,iBAAKV,MAAL,CAAYe,KAAZ,CAAkBC,CAAlB,GAAsB,KAAKhB,MAAL,CAAYe,KAAZ,CAAkBC,CAAlB,GAAsBH,QAAQG,CAAR,GAAYT,IAAxD;AACA,iBAAKP,MAAL,CAAYe,KAAZ,CAAkBE,CAAlB,GAAsB,KAAKjB,MAAL,CAAYe,KAAZ,CAAkBE,CAAlB,GAAsBJ,QAAQI,CAAR,GAAYV,IAAxD;AACA;AACH;AAEJ;AA7BiB,CAAT,CAAb;;AAsCAW,OAAOC,OAAP,GAAiB,EAACvB,cAAD,EAAjB","file":"MoveAi.js","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\Script\\Client\\Logic","sourcesContent":["//控制角色移动的\r\nvar eObjState = require(\"ClientDef\").eObjState;\r\nconst ONEGRIDPIX = 64;\r\n\r\nvar MoveAi = cc.Class({\r\n\r\n    properties:{\r\n\r\n        m_pObj:null,\r\n\r\n    },\r\n\r\n    initMoveAi(pObj)\r\n    {\r\n        this.m_pObj = pObj;\r\n    },\r\n\r\n    updateMoveAi(dt)\r\n    {\r\n        if(this.m_pObj.m_objState == eObjState.eObjWalk)\r\n        {\r\n            var fDis = ONEGRIDPIX * this.m_pObj.m_iSpeed * dt;\r\n            fDis = fDis.toFixed(2);\r\n            //var fdirhudu = 45 * this.m_pObj.m_Dir/180 * Math.PI;\r\n            var fdirhudu = this.m_pObj.m_fDir; \r\n\r\n            cc.log(\"updateMoveAi fdirhudu\" + fdirhudu);\r\n            var tempVec = cc.pForAngle(fdirhudu);\r\n            this.m_pObj.m_Pos.x = this.m_pObj.m_Pos.x + tempVec.x * fDis;\r\n            this.m_pObj.m_Pos.y = this.m_pObj.m_Pos.y + tempVec.y * fDis;\r\n            //this.m_pObj.m_objState = eObjState.eObjWalk;\r\n        }\r\n        \r\n    },\r\n\r\n\r\n\r\n\r\n\r\n    \r\n});\r\n\r\nmodule.exports = {MoveAi};\r\n"]}